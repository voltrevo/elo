import * as deepspeech from 'deepspeech';
import { analyzeTargetTranscript } from '../src/analyze';

const deepspeechAnalysis: deepspeech.Metadata = {"transcripts":[{"confidence":-3.2487964630126953,"tokens":[{"start_time":0.7999999523162842,"timestep":40,"text":"i"},{"start_time":0.8199999928474426,"timestep":41,"text":"f"},{"start_time":0.85999995470047,"timestep":43,"text":" "},{"start_time":0.9199999570846558,"timestep":46,"text":"y"},{"start_time":0.9399999976158142,"timestep":47,"text":"o"},{"start_time":0.9599999785423279,"timestep":48,"text":"u"},{"start_time":1.0399999618530273,"timestep":52,"text":" "},{"start_time":1.100000023841858,"timestep":55,"text":"c"},{"start_time":1.1399999856948853,"timestep":57,"text":"a"},{"start_time":1.1799999475479126,"timestep":59,"text":"n"},{"start_time":1.1999999284744263,"timestep":60,"text":"'"},{"start_time":1.2400000095367432,"timestep":62,"text":"t"},{"start_time":1.3199999332427979,"timestep":66,"text":" "},{"start_time":1.5,"timestep":75,"text":"e"},{"start_time":1.5399999618530273,"timestep":77,"text":"x"},{"start_time":1.5799999237060547,"timestep":79,"text":"p"},{"start_time":1.5999999046325684,"timestep":80,"text":"l"},{"start_time":1.6399999856948853,"timestep":82,"text":"a"},{"start_time":1.659999966621399,"timestep":83,"text":"i"},{"start_time":1.6999999284744263,"timestep":85,"text":"n"},{"start_time":1.7799999713897705,"timestep":89,"text":" "},{"start_time":1.8600000143051147,"timestep":93,"text":"i"},{"start_time":1.8799999952316284,"timestep":94,"text":"t"},{"start_time":2,"timestep":100,"text":" "},{"start_time":2.0399999618530273,"timestep":102,"text":"s"},{"start_time":2.119999885559082,"timestep":106,"text":"i"},{"start_time":2.1399998664855957,"timestep":107,"text":"m"},{"start_time":2.200000047683716,"timestep":110,"text":"p"},{"start_time":2.259999990463257,"timestep":113,"text":"l"},{"start_time":2.419999837875366,"timestep":121,"text":"y"},{"start_time":2.799999952316284,"timestep":140,"text":" "},{"start_time":2.859999895095825,"timestep":143,"text":"y"},{"start_time":2.879999876022339,"timestep":144,"text":"o"},{"start_time":2.8999998569488525,"timestep":145,"text":"u"},{"start_time":2.9600000381469727,"timestep":148,"text":" "},{"start_time":3,"timestep":150,"text":"d"},{"start_time":3.0399999618530273,"timestep":152,"text":"o"},{"start_time":3.059999942779541,"timestep":153,"text":"r"},{"start_time":3.0799999237060547,"timestep":154,"text":"n"},{"start_time":3.0999999046325684,"timestep":155,"text":"'"},{"start_time":3.1399998664855957,"timestep":157,"text":"t"},{"start_time":3.179999828338623,"timestep":159,"text":" "},{"start_time":3.299999952316284,"timestep":165,"text":"u"},{"start_time":3.3399999141693115,"timestep":167,"text":"n"},{"start_time":3.43999981880188,"timestep":172,"text":"d"},{"start_time":3.5,"timestep":175,"text":"e"},{"start_time":3.5199999809265137,"timestep":176,"text":"r"},{"start_time":3.559999942779541,"timestep":178,"text":"s"},{"start_time":3.5999999046325684,"timestep":180,"text":"t"},{"start_time":3.6599998474121094,"timestep":183,"text":"a"},{"start_time":3.6999998092651367,"timestep":185,"text":"n"},{"start_time":3.7200000286102295,"timestep":186,"text":"d"},{"start_time":3.759999990463257,"timestep":188,"text":" "},{"start_time":3.859999895095825,"timestep":193,"text":"i"},{"start_time":3.879999876022339,"timestep":194,"text":"t"},{"start_time":3.919999837875366,"timestep":196,"text":" "},{"start_time":3.9800000190734863,"timestep":199,"text":"w"},{"start_time":4,"timestep":200,"text":"h"},{"start_time":4.019999980926514,"timestep":201,"text":"i"},{"start_time":4.039999961853027,"timestep":202,"text":"l"},{"start_time":4.079999923706055,"timestep":204,"text":"l"},{"start_time":4.099999904632568,"timestep":205,"text":" "},{"start_time":4.179999828338623,"timestep":209,"text":"e"},{"start_time":4.199999809265137,"timestep":210,"text":"n"},{"start_time":4.360000133514404,"timestep":218,"text":"o"},{"start_time":4.380000114440918,"timestep":219,"text":"u"},{"start_time":4.420000076293945,"timestep":221,"text":"g"},{"start_time":4.440000057220459,"timestep":222,"text":"h"}]}]};
const targetTranscript = 'If you can\'t explain it simply, you don\'t understand it well enough.';

const targetAnalysis = analyzeTargetTranscript(deepspeechAnalysis, targetTranscript);

console.log(targetAnalysis);
